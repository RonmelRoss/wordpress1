(self.webpackChunkrealCookieBanner_name_=self.webpackChunkrealCookieBanner_name_||[]).push([[478],{5632:function(e,t,a){"use strict";a.r(t),a.d(t,{BlockerRouter:function(){return ie}});var n=a(3804),r=a(3554),c=a(847),o=a(407),l=a(217),i=a(5744),s=a(2789),u=a(2762),m=a(6412),d=a(3458),p=a(8791),f=function(e){var t=e.count,a=(0,n.useMemo)((function(){for(var e=[],a=0;a<t;a++)e.push({key:a});return e}),[t]);return React.createElement(s.ZP,{dataSource:a,renderItem:function(){return React.createElement(s.ZP.Item,null,React.createElement(p.Z,{loading:!0,active:!0,paragraph:{rows:1}}))}})},h=a(7450),k=a(6438),b=a(8990),v=a(1997),R=function(){var e=(0,c.useRouteMatch)().params,t=(0,b.m)().cookieStore,a=+e.blocker,r=isNaN(+a)?0:+a,o=!!a,l=t.blockers.entries.get(r)||new v.p(t.blockers,{id:0}),i=(0,n.useCallback)((function(e){var t=e.key;return"#/blocker/edit/".concat(t)}),[l]);return{blocker:l,id:r,queried:o,fetched:0!==l.key,link:"#/blocker",editLink:i,addLink:"#/blocker/new"}},E=a(5572),_=(0,r.Pi)((function(){var e=R().addLink,t=(0,E.R)().link,a=(0,b.m)().cookieStore.cookiesCount;return React.createElement(h.Z,{description:a>0?(0,k.__)("You have not yet created a content blocker."):(0,k.__)("Because a content blocker must be associated with a cookie, you must create a cookie first.")},React.createElement("a",{className:"button button-primary",href:a>0?e:t},(0,k.__)("Create content blocker")))})),y=a(7057),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},w=a(352),C=function(e,t){return n.createElement(w.Z,Object.assign({},e,{ref:t,icon:g}))};C.displayName="RightOutlined";var Z=n.forwardRef(C),x=(0,r.Pi)((function(){var e=R(),t=e.addLink,a=e.editLink,r=(0,b.m)().cookieStore,c=r.blockers,o=r.blockersCount,l=c.busy,p=c.entries;return(0,n.useEffect)((function(){r.fetchBlockers(),r.fetchGroups()}),[]),o?React.createElement(React.Fragment,null,React.createElement("div",{className:"wp-clearfix"},React.createElement("a",{href:t,className:"button button-primary right",style:{marginBottom:10}},(0,k.__)("Add content blocker"))),l?React.createElement(f,{count:o}):React.createElement("div",null,React.createElement(s.ZP,null,Array.from(p.values()).map((function(e){var t=e.key,n=e.busy,r=e.data,c=e.hosts,o=e.cookies,l=e.presetModel,p=r.title,f=r.content,h=r.status;return React.createElement(s.ZP.Item,{key:t,itemID:t.toString(),actions:[React.createElement("a",{key:"edit",href:a(e),style:{textDecoration:"none"}},(0,k.__)("Edit")),React.createElement(d.Z,{key:"delete",title:(0,k.__)("Are you sure that you want to delete this content blocker?"),placement:"bottomRight",onConfirm:function(){return e.delete({force:!0})},okText:(0,k.__)("Delete"),cancelText:(0,k.__)("Cancel"),overlayStyle:{maxWidth:350}},React.createElement("a",{style:{cursor:"pointer"}},(0,k.__)("Delete")))]},React.createElement(i.Z,{spinning:n},React.createElement(s.ZP.Item.Meta,{avatar:l?React.createElement(m.C,{size:"large",src:l.fullLogoUrl,shape:"square"}):React.createElement(m.C,{size:"large",shape:"circle"},p.raw.toUpperCase()[0]),title:React.createElement("span",null,p.raw," ","draft"===h?React.createElement(u.Z,{color:"orange"},(0,k.__)("Draft")):"private"===h?React.createElement(u.Z,{color:"red"},(0,k.__)("Disabled")):null,0===o.length&&React.createElement(u.Z,{color:"red"},(0,k.__)("No connected cookies defined")," ",React.createElement(Z,null)," ",(0,k.__)("Disabled")),!!r.meta.presetId&&React.createElement(u.Z,null,(0,k.__)("Created from template"))),description:React.createElement("div",null,!!f.raw&&React.createElement("div",null,(0,y.E)(f.raw)),React.createElement("div",{style:{paddingTop:5}},(0,k.__)("URLs / Elements to block"),":"," ",c.map((function(e,t){return React.createElement(u.Z,{key:"".concat(e,"-").concat(t)},e)}))),React.createElement("div",{style:{paddingTop:5}},(0,k.__)("Visual Content Blocker"),":"," ",React.createElement(u.Z,null,r.meta.visual?(0,k.__)("Yes, if possible"):(0,k.__)("No"))))})))}))))):React.createElement(_,null)})),S=a(6526),P=a.n(S),I=a(518),N=a.n(I),B=a(5450),F=a.n(B),A=a(8714),T=a.n(A),D=a(6310),L=a.n(D),q=a(4162),U=a(150),V=a.n(U),M=a(8911),Y=a(6428),j=a(2780),G=a(2918),H=a(175),z=a(7256),O=a.n(z),W=a(867),J=a.n(W),K=a(1593),X=a(980),$=a(9017),Q=a(4662),ee=a(4849),te=a(4576),ae=function(e){var t=e.noneExistingCookies,a=e.onCreated,r=(0,n.useState)(),c=L()(r,2),o=c[0],l=c[1],i=(0,n.useState)([]),s=L()(i,2),u=s[0],m=s[1],d=(t||[]).filter((function(e){var t=e.id;return-1===u.indexOf(t)})),p=null==t?void 0:t.map((function(e){var t=e.id,n=e.attributes,r=e.version;return React.createElement(ee.Z,{key:t,visible:o===t,title:(0,k.__)("Add cookie"),width:"calc(100% - 50px)",bodyStyle:{paddingBottom:0},footer:null,onCancel:function(){return l(void 0)}},React.createElement(te.ZG,{navigateAfterCreation:!1,scrollToTop:!1,attributes:n,preset:{identifier:t,version:r,contentBlockerPresets:{}},onCreated:function(e){l(void 0),m([].concat(O()(u),[o])),a(e)}}))}));return React.createElement(React.Fragment,null,p,0===d.length?null:React.createElement("div",{className:"notice notice-warning below-h2 notice-alt"},React.createElement("p",null,(0,k.__)("Some cookies could not be automatically retrieved from the template. Please select (or create if not already exist) the following cookies:",d.join(", "))),React.createElement("ul",{style:{margin:"0 0 10px"}},d.map((function(e){var t=e.id,a=e.name;return React.createElement("li",{key:t},React.createElement("strong",null,a)," • ",React.createElement("a",{onClick:function(e){l(t),e.preventDefault()},style:{cursor:"pointer"}},(0,k.__)("Create now")))})))))},ne={labelCol:{span:6},wrapperCol:{span:16}},re=(0,r.Pi)((function(e){var t,a,r,o=e.preset,l=e.attributes,s=e.navigateAfterCreation,u=void 0===s||s,m=e.cookieCreationPrompt,d=void 0!==m&&m,f=R(),h=f.blocker,E=f.id,_=f.queried,y=f.fetched,g=f.link,w=(0,c.useHistory)(),C=K.Z.useForm(),Z=L()(C,1)[0],x=(0,n.useState)(!1),S=L()(x,2),I=S[0],B=S[1],A=(0,n.useState)(d),D=L()(A,2),q=D[0],U=D[1],z=(0,b.m)().cookieStore,W=z.blockers,ee=z.essentialGroup,te=y?{name:h.data.title.raw,status:h.data.status,description:h.data.content.raw,hosts:h.data.meta.hosts,cookies:h.cookies,visual:h.data.meta.visual,forceHidden:h.data.meta.forceHidden}:{name:(null==l?void 0:l.name)||"",status:"publish",description:(null==l?void 0:l.description)||"",hosts:(null==l||null===(t=l.hosts)||void 0===t?void 0:t.join("\n"))||"",cookies:(null==l||null===(a=l.cookies)||void 0===a?void 0:a.filter(Number))||[],visual:"boolean"!=typeof(null==l?void 0:l.visual)||l.visual,forceHidden:(null==l?void 0:l.forceHidden)||!1,presetCheck:!o},re=null==l||null===(r=l.cookies)||void 0===r?void 0:r.filter((function(e){return"object"===J()(e)})),ce=(0,n.useCallback)((function(e){Z.setFieldsValue({cookies:[].concat(O()(Z.getFieldValue("cookies")),[e.key])})}),[Z]);(0,n.useEffect)((function(){_&&!y&&W.getSingle({params:{id:E,context:"edit"}})}),[_,y]),(0,n.useEffect)((function(){(0,$.X)(0),ee||z.fetchGroups()}),[]);var oe=(0,n.useCallback)(function(){var e=T()(F().mark((function e(t){var a,n,r,c,l,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.name,n=t.status,r=t.description,c=N()(t,["name","status","description"]),delete(l=P()(P()({},c),{},{cookies:c.cookies.join(",")})).presetCheck,!_){e.next=13;break}return h.setName(a),h.setStatus(n),h.setDescription(r),h.setMeta(l),e.next=11,h.patch();case 11:e.next=16;break;case 13:return i=new v.p(W,{title:{rendered:a},content:{rendered:r,protected:!1},status:n,meta:P()(P()({},l),{},{presetId:null==o?void 0:o.identifier,presetVersion:null==o?void 0:o.version})}),e.next=16,i.persist();case 16:U(!1),H.ZP.success((0,k.__)("You successfully saved the content blocker.")),u&&setTimeout((function(){return w.push(g.slice(1))}),0),e.next=25;break;case 21:throw e.prev=21,e.t0=e.catch(0),H.ZP.error(e.t0.responseJSON.message),e.t0;case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),[_,h,z]),le=(0,n.useCallback)(function(){var e=T()(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.prev=1,e.next=4,oe(t);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.prev=8,B(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,6,8,11]])})));return function(t){return e.apply(this,arguments)}}(),[Z,oe]),ie=(0,n.useCallback)((function(e){H.ZP.error((0,k.__)("The content blocker could not be saved due to missing/invalid form values.")),e.errorFields.length&&Z.scrollToField(e.errorFields[0].name,{behavior:"smooth",block:"center"})}),[]),se=(0,n.useCallback)((function(){return!q||(d?(0,k.__)("You have already created a cookie. Are you sure that you won't create the corresponding content blocker?"):(0,k.__)("You have unsaved changes. If you click on confirm, your changes will be discarded."))}),[Z,te]);return _&&!y?React.createElement(p.Z,{active:!0,paragraph:{rows:8}}):React.createElement(i.Z,{spinning:I},React.createElement(c.Prompt,{message:se}),React.createElement(K.Z,V()({name:"blocker-".concat(E),form:Z},ne,{initialValues:te,onFinish:le,onFinishFailed:ie,onValuesChange:function(){return U(!0)}}),React.createElement(Q.C,{offset:ne.labelCol.span},(0,k.__)("General content blocker configuration")),React.createElement(K.Z.Item,{label:(0,k.__)("Name"),required:!0},React.createElement(K.Z.Item,{name:"name",noStyle:!0,rules:[{required:!0,message:(0,k.__)("Please provide a name!")}]},React.createElement(G.Z,null)),React.createElement("p",{className:"description"},(0,k.__)('Each content blocker should have a descriptive name that is understandable to a user, e. g. "Google Maps".'))),React.createElement(K.Z.Item,{label:(0,k.__)("Status"),required:!0},React.createElement(K.Z.Item,{name:"status",noStyle:!0,rules:[{required:!0,message:(0,k.__)("Please choose a status!")}]},React.createElement(j.ZP.Group,null,React.createElement(j.ZP.Button,{value:"publish"},(0,k.__)("Enabled")),React.createElement(j.ZP.Button,{value:"private"},(0,k.__)("Disabled")),React.createElement(j.ZP.Button,{value:"draft"},(0,k.__)("Draft")))),React.createElement("p",{className:"description"},(0,k.__)('Content Blockers with a "Draft" or "Disabled" status will not visible to the public. In addition, a draft will be highlighted in the content blocker table so that you do not forget to configure it.'))),React.createElement(K.Z.Item,{label:(0,k.__)("Description")},React.createElement(K.Z.Item,{name:"description",noStyle:!0},React.createElement(G.Z.TextArea,{autoSize:{minRows:3}})),React.createElement("p",{className:"description"},(0,k.__)("You should explain to the visitors of your website which content will be loaded instead of the content blocker if they agree to the associated cookies (only shown in visual content blockers)."))),React.createElement(Q.C,{offset:ne.labelCol.span},(0,k.__)("Technical Definition")),React.createElement(K.Z.Item,{label:(0,k.__)("URLs / Elements to block"),required:!0},React.createElement(K.Z.Item,{name:"hosts",noStyle:!0,rules:[{required:!0,message:(0,k.__)("Please provide at least one URL/element!")}]},React.createElement(G.Z.TextArea,{autoSize:{minRows:3}})),React.createElement("p",{className:"description"},(0,k._i)((0,k.__)("Enter one URL per line, whose content will be replaced by the content blocker. You can block all available URLs on your website including Videos, Iframes, Scripts, Inline Scripts and Stylesheets. Please use an asterisk ({{code}}*{{/code}}) as wildcard."),{code:React.createElement("code",null)}),React.createElement("br",null),React.createElement("br",null),(0,k._i)((0,k.__)('{{strong}}Pro tip:{{/strong}} Use the following syntax to create the content blocker on a custom HTML element: {{code}}div[id="my-embed"]{{/code}}. This also works with a contains-syntax: {{code}}div[class*="my-embed"]{{/code}}'),{strong:React.createElement("strong",null),code:React.createElement("code",null)}))),React.createElement(K.Z.Item,{label:(0,k.__)("Connected cookies"),required:!0},React.createElement(K.Z.Item,{name:"cookies",noStyle:!0,rules:[{type:"array",required:!0,message:(0,k.__)("Please provide at least one cookie!")}]},React.createElement(X.m,{postType:"rcb-cookie",multiple:!0,filter:function(e){return e["rcb-cookie-group"][0]!==(null==ee?void 0:ee.key)}})),React.createElement("p",{className:"description"},(0,k._i)((0,k.__)("A content blocker is displayed until the user has agreed to all necessary cookies/services that would be set by loading the content. {{strong}}You must define all cookies that are loaded by these services as soon as the user wants to see the blocked content.{{/strong}}"),{strong:React.createElement("strong",null)})),React.createElement(ae,{noneExistingCookies:re,onCreated:ce})),React.createElement(Q.C,{offset:ne.labelCol.span,description:(0,k.__)("For each content blocker it can be defined if it should be visually visible. This means that if the user has not agreed to the respective cookies, a box with a button is displayed to adjust the privacy settings so that the actual content can be loaded. The design of the box is inherited from the cookie banner.")},(0,k.__)("Visual")),React.createElement(K.Z.Item,{wrapperCol:{offset:ne.labelCol.span}},React.createElement("span",null,React.createElement(K.Z.Item,{name:"visual",valuePropName:"checked",noStyle:!0},React.createElement(Y.Z,null)),React.createElement("span",null,"  ",(0,k.__)("Show the visual content blocker, if possible")))),React.createElement(K.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.visual!==t.visual}},(function(e){return!!(0,e.getFieldValue)("visual")&&React.createElement(K.Z.Item,{wrapperCol:{offset:ne.labelCol.span}},React.createElement("span",null,React.createElement(K.Z.Item,{name:"forceHidden",valuePropName:"checked",noStyle:!0},React.createElement(Y.Z,null)),React.createElement("span",null,"  ",(0,k.__)("Force visual content blocker for hidden elements"),React.createElement("br",null),(0,k.__)("In rare cases, visual content blockers are not displayed because the main element of the blocked content is not visible either. Enable this option if this is the case and you want to force to display a content blocker for non-visible elements."))))})),!!o&&React.createElement(K.Z.Item,{name:"presetCheck",valuePropName:"checked",required:!0,rules:[{type:"boolean",required:!0,transform:function(e){return e||void 0},message:(0,k.__)("Please confirm that you have checked the content of the content blocker.")}],wrapperCol:{offset:ne.labelCol.span}},React.createElement(M.Z,null,(0,k.__)("I have checked the information in the content blocker template myself and added any missing information or corrected any information that does not fit to my use case."))),React.createElement(K.Z.Item,{className:"rcb-form-sticky-submit"},React.createElement("span",null,React.createElement("input",{type:"submit",className:"button button-primary right",value:(0,k.__)("Save")})))))})),ce=a(4657),oe=(0,r.Pi)((function(){var e=(0,b.m)(),t=e.cookieStore,a=e.checklistStore,r=t.presetsBlocker,c=t.busyPresetsBlocker,o=(0,n.useState)(),s=L()(o,2),u=s[0],m=s[1],d=(0,n.useState)(!1),p=L()(d,2),f=p[0],h=p[1],k=(0,ce.y)(),v=k.force,R=k.cookieCreationPrompt,E=(0,n.useCallback)(function(){var e=T()(F().mark((function e(a){var n,r,c,o,l;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),n=t.presetsBlocker.get(a),e.next=4,n.fetchAttributes();case 4:r=n.data,c=r.identifier,o=r.version,l=n.attributes,m({identifier:c,version:o,attributes:l}),h(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),_=(0,n.useCallback)((function(e){!1===e?m(!1):E(e.identifier)}),[E]);return(0,n.useEffect)((function(){function e(){return(e=T()(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchPresetsBlocker();case 2:v&&E(v);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),a.toggleChecklistItem("add-blocker",!0)}),[]),void 0===u?React.createElement(l.f,null,v?React.createElement(i.Z,{spinning:!0}):React.createElement(i.Z,{spinning:f},React.createElement(q.j,{type:"contentBlocker",presets:Array.from(r.values()).map((function(e){var t=e.data,a=(t.logoFile,N()(t,["logoFile"])),n=e.fullLogoUrl;return P()(P()({},a),{},{logoUrl:n})})),fetchingPresets:c,onSelect:_}))):React.createElement(l.f,{maxWidth:"fixed"},React.createElement(re,{cookieCreationPrompt:"1"===R,preset:!1===u?void 0:{identifier:u.identifier,version:u.version},attributes:!1===u?void 0:u.attributes}))})),le=a(8413),ie=(0,r.Pi)((function(){var e=(0,b.m)().optionStore,t=e.blockerActive,a=e.allBlockerCount,r=(0,c.useRouteMatch)().path,i=(0,n.useCallback)((function(t){return e.updateSettings({bannerActive:!0,blockerActive:!0}),t.preventDefault(),!1}),[e]);return React.createElement(React.Fragment,null,!t&&a>0&&React.createElement("div",{className:"notice notice-warning inline below-h2 notice-alt",style:{margin:"10px 0 0 0"}},React.createElement("p",null,(0,k.__)("Content Blockers are globally deactivated in the settings and are therefore not displayed on your website.")," ","•"," ",React.createElement("a",{href:"#",onClick:i},(0,k.__)("Enable now")))),React.createElement(c.Switch,null,React.createElement(React.Fragment,null,React.createElement(o.K,{identifier:"blocker"}),React.createElement(c.Route,{path:r,exact:!0},React.createElement(l.f,null,React.createElement(x,null),React.createElement("p",{className:"description",style:{maxWidth:800,margin:"30px auto 0",textAlign:"center"}},(0,le.$)("blocker")))),React.createElement(c.Route,{path:"".concat(r,"/new")},React.createElement(oe,null)),React.createElement(c.Route,{path:"".concat(r,"/edit/:blocker")},React.createElement(l.f,{maxWidth:"fixed"},React.createElement(re,null))))))}))}}]);
//# sourceMappingURL=chunk-config-tab-blocker.lite.js.map?ver=265123f896d649c4af93